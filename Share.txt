@Test
void testGenerateToken_shouldAssignTokensCorrectly() throws Exception {
    try (MockedStatic<AADClient> mockedStatic = mockStatic(AADClient.class)) {
        mockedStatic.when(() -> AADClient.defaultClient(anyString())).thenReturn(aadClient);

        when(aadClient.authenticateByUserAndPassword(any(), any())).thenReturn(authenticatedUser);
        when(authenticatedUser.accessToken()).thenReturn("legacy-token");

        AADSecurityUtil spyUtil = Mockito.spy(aadSecurityUtil);
        doReturn("new-token").when(spyUtil).getTokenByScope("test-scope");

        spyUtil.generateToken();

        assertEquals("new-token", spyUtil.getUserAccessToken());
        assertEquals("legacy-token", spyUtil.getDfcAccessToken());
    }
}
